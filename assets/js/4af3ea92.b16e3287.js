(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{120:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),p=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=p(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),u=a,h=d["".concat(i,".").concat(u)]||d[u]||b[u]||o;return n?r.a.createElement(h,s(s({ref:t},c),{},{components:n})):r.a.createElement(h,s({ref:t},c))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},91:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return p}));var a=n(3),r=n(8),o=(n(0),n(120)),i={id:"inheritance",title:"Inheritance",sidebar_label:"4.2 Inheritance",slug:"inheritance",custom_edit_url:null},s={unversionedId:"python/classes_objects/inheritance",id:"python/classes_objects/inheritance",isDocsHomePage:!1,title:"Inheritance",description:"Inheritance is a commonly used tool for writing extensible programs.",source:"@site/docs/python/classes_objects/02_Inheritance.md",slug:"/python/classes_objects/inheritance",permalink:"/docs/python/classes_objects/inheritance",editUrl:null,version:"current",sidebar_label:"4.2 Inheritance",sidebar:"someSidebar",previous:{title:"Class",permalink:"/docs/python/classes_objects/class"},next:{title:"Special Methods",permalink:"/docs/python/classes_objects/special_methods"}},l=[{value:"Introduction",id:"introduction",children:[]},{value:"Extending",id:"extending",children:[]},{value:"Example",id:"example",children:[]},{value:"Add a new method",id:"add-a-new-method",children:[]},{value:"Redefining an existing method",id:"redefining-an-existing-method",children:[]},{value:"Overriding",id:"overriding",children:[{value:"<code>__init__</code> and inheritance",id:"__init__-and-inheritance",children:[]},{value:"Using Inheritance",id:"using-inheritance",children:[]},{value:"&quot;is a&quot; relationship",id:"is-a-relationship",children:[]},{value:"<code>object</code> base class",id:"object-base-class",children:[]},{value:"Multiple Inheritance",id:"multiple-inheritance",children:[]}]},{value:"Exercises",id:"exercises",children:[{value:"Exercise 4.5: An Extensibility Problem",id:"exercise-45-an-extensibility-problem",children:[]},{value:"Exercise 4.6: Using Inheritance to Produce Different Output",id:"exercise-46-using-inheritance-to-produce-different-output",children:[]},{value:"Exercise 4.7: Polymorphism in Action",id:"exercise-47-polymorphism-in-action",children:[]},{value:"Exercise 4.8: Putting it all together",id:"exercise-48-putting-it-all-together",children:[]},{value:"Discussion",id:"discussion",children:[]}]}],c={toc:l};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Inheritance is a commonly used tool for writing extensible programs.\nThis section explores that idea."),Object(o.b)("h3",{id:"introduction"},"Introduction"),Object(o.b)("p",null,"Inheritance is used to specialize existing objects:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class Parent:\n    ...\n\nclass Child(Parent):\n    ...\n")),Object(o.b)("p",null,"The new class ",Object(o.b)("inlineCode",{parentName:"p"},"Child")," is called a derived class or subclass.  The\n",Object(o.b)("inlineCode",{parentName:"p"},"Parent")," class is known as base class or superclass.  ",Object(o.b)("inlineCode",{parentName:"p"},"Parent")," is\nspecified in ",Object(o.b)("inlineCode",{parentName:"p"},"()")," after the class name, ",Object(o.b)("inlineCode",{parentName:"p"},"class Child(Parent):"),"."),Object(o.b)("h3",{id:"extending"},"Extending"),Object(o.b)("p",null,"With inheritance, you are taking an existing class and:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Adding new methods"),Object(o.b)("li",{parentName:"ul"},"Redefining some of the existing methods"),Object(o.b)("li",{parentName:"ul"},"Adding new attributes to instances")),Object(o.b)("p",null,"In the end you are ",Object(o.b)("strong",{parentName:"p"},"extending existing code"),"."),Object(o.b)("h3",{id:"example"},"Example"),Object(o.b)("p",null,"Suppose that this is your starting class:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n\n    def cost(self):\n        return self.shares * self.price\n\n    def sell(self, nshares):\n        self.shares -= nshares\n")),Object(o.b)("p",null,"You can change any part of this via inheritance."),Object(o.b)("h3",{id:"add-a-new-method"},"Add a new method"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class MyStock(Stock):\n    def panic(self):\n        self.sell(self.shares)\n")),Object(o.b)("p",null,"Usage example."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},">>> s = MyStock('GOOG', 100, 490.1)\n>>> s.sell(25)\n>>> s.shares\n75\n>>> s.panic()\n>>> s.shares\n0\n>>>\n")),Object(o.b)("h3",{id:"redefining-an-existing-method"},"Redefining an existing method"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class MyStock(Stock):\n    def cost(self):\n        return 1.25 * self.shares * self.price\n")),Object(o.b)("p",null,"Usage example."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},">>> s = MyStock('GOOG', 100, 490.1)\n>>> s.cost()\n61262.5\n>>>\n")),Object(o.b)("p",null,"The new method takes the place of the old one. The other methods are unaffected. It's tremendous."),Object(o.b)("h2",{id:"overriding"},"Overriding"),Object(o.b)("p",null,"Sometimes a class extends an existing method, but it wants to use the\noriginal implementation inside the redefinition.  For this, use ",Object(o.b)("inlineCode",{parentName:"p"},"super()"),":"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class Stock:\n    ...\n    def cost(self):\n        return self.shares * self.price\n    ...\n\nclass MyStock(Stock):\n    def cost(self):\n        # Check the call to `super`\n        actual_cost = super().cost()\n        return 1.25 * actual_cost\n")),Object(o.b)("p",null,"Use ",Object(o.b)("inlineCode",{parentName:"p"},"super()")," to call the previous version."),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"Caution: In Python 2, the syntax was more verbose.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"actual_cost = super(MyStock, self).cost()\n")),Object(o.b)("h3",{id:"__init__-and-inheritance"},Object(o.b)("inlineCode",{parentName:"h3"},"__init__")," and inheritance"),Object(o.b)("p",null,"If ",Object(o.b)("inlineCode",{parentName:"p"},"__init__")," is redefined, it is essential to initialize the parent."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class Stock:\n    def __init__(self, name, shares, price):\n        self.name = name\n        self.shares = shares\n        self.price = price\n\nclass MyStock(Stock):\n    def __init__(self, name, shares, price, factor):\n        # Check the call to `super` and `__init__`\n        super().__init__(name, shares, price)\n        self.factor = factor\n\n    def cost(self):\n        return self.factor * super().cost()\n")),Object(o.b)("p",null,"You should call the ",Object(o.b)("inlineCode",{parentName:"p"},"__init__()")," method on the ",Object(o.b)("inlineCode",{parentName:"p"},"super")," which is the\nway to call the previous version as shown previously."),Object(o.b)("h3",{id:"using-inheritance"},"Using Inheritance"),Object(o.b)("p",null,"Inheritance is sometimes used to organize related objects."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class Shape:\n    ...\n\nclass Circle(Shape):\n    ...\n\nclass Rectangle(Shape):\n    ...\n")),Object(o.b)("p",null,"Think of a logical hierarchy or taxonomy.  However, a more common (and\npractical) usage is related to making reusable or extensible code.\nFor example, a framework might define a base class and instruct you\nto customize it."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class CustomHandler(TCPHandler):\n    def handle_request(self):\n        ...\n        # Custom processing\n")),Object(o.b)("p",null,"The base class contains some general purpose code.\nYour class inherits and customized specific parts."),Object(o.b)("h3",{id:"is-a-relationship"},'"is a" relationship'),Object(o.b)("p",null,"Inheritance establishes a type relationship."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class Shape:\n    ...\n\nclass Circle(Shape):\n    ...\n")),Object(o.b)("p",null,"Check for object instance."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},">>> c = Circle(4.0)\n>>> isinstance(c, Shape)\nTrue\n>>>\n")),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"Important: Ideally, any code that worked with instances of the parent\nclass will also work with instances of the child class.")),Object(o.b)("h3",{id:"object-base-class"},Object(o.b)("inlineCode",{parentName:"h3"},"object")," base class"),Object(o.b)("p",null,"If a class has no parent, you sometimes see ",Object(o.b)("inlineCode",{parentName:"p"},"object")," used as the base."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class Shape(object):\n    ...\n")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"object")," is the parent of all objects in Python."),Object(o.b)("p",null,"*Note: it's not technically required, but you often see it specified\nas a hold-over from it's required use in Python 2. If omitted, the\nclass still implicitly inherits from ",Object(o.b)("inlineCode",{parentName:"p"},"object"),"."),Object(o.b)("h3",{id:"multiple-inheritance"},"Multiple Inheritance"),Object(o.b)("p",null,"You can inherit from multiple classes by specifying them in the definition of the class."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"class Mother:\n    ...\n\nclass Father:\n    ...\n\nclass Child(Mother, Father):\n    ...\n")),Object(o.b)("p",null,"The class ",Object(o.b)("inlineCode",{parentName:"p"},"Child")," inherits features from both parents.  There are some\nrather tricky details. Don't do it unless you know what you are doing.\nSome further information will be given in the next section, but we're not\ngoing to utilize multiple inheritance further in this course."),Object(o.b)("h2",{id:"exercises"},"Exercises"),Object(o.b)("p",null,"A major use of inheritance is in writing code that's meant to be\nextended or customized in various ways--especially in libraries or\nframeworks. To illustrate, consider the ",Object(o.b)("inlineCode",{parentName:"p"},"print_report()")," function\nin your ",Object(o.b)("inlineCode",{parentName:"p"},"report.py")," program.  It should look something like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"def print_report(reportdata):\n    '''\n    Print a nicely formated table from a list of (name, shares, price, change) tuples.\n    '''\n    headers = ('Name','Shares','Price','Change')\n    print('%10s %10s %10s %10s' % headers)\n    print(('-'*10 + ' ')*len(headers))\n    for row in reportdata:\n        print('%10s %10d %10.2f %10.2f' % row)\n")),Object(o.b)("p",null,"When you run your report program, you should be getting output like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},">>> import report\n>>> report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n")),Object(o.b)("h3",{id:"exercise-45-an-extensibility-problem"},"Exercise 4.5: An Extensibility Problem"),Object(o.b)("p",null,"Suppose that you wanted to modify the ",Object(o.b)("inlineCode",{parentName:"p"},"print_report()")," function to\nsupport a variety of different output formats such as plain-text,\nHTML, CSV, or XML.  To do this, you could try to write one gigantic\nfunction that did everything.  However, doing so would likely lead to\nan unmaintainable mess.  Instead, this is a perfect opportunity to use\ninheritance instead."),Object(o.b)("p",null,"To start, focus on the steps that are involved in a creating a table.\nAt the top of the table is a set of table headers.  After that, rows\nof table data appear.  Let's take those steps and put them into\ntheir own class.  Create a file called ",Object(o.b)("inlineCode",{parentName:"p"},"tableformat.py")," and define the\nfollowing class:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"# tableformat.py\n\nclass TableFormatter:\n    def headings(self, headers):\n        '''\n        Emit the table headings.\n        '''\n    raise NotImplementedError()\n\n    def row(self, rowdata):\n        '''\n        Emit a single row of table data.\n        '''\n    raise NotImplementedError()\n")),Object(o.b)("p",null,'This class does nothing, but it serves as a kind of design specification for\nadditional classes that will be defined shortly.  A class like this is\nsometimes called an "abstract base class."'),Object(o.b)("p",null,"Modify the ",Object(o.b)("inlineCode",{parentName:"p"},"print_report()")," function so that it accepts a\n",Object(o.b)("inlineCode",{parentName:"p"},"TableFormatter")," object as input and invokes methods on it to produce\nthe output.  For example, like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"# report.py\n...\n\ndef print_report(reportdata, formatter):\n    '''\n    Print a nicely formated table from a list of (name, shares, price, change) tuples.\n    '''\n    formatter.headings(['Name','Shares','Price','Change'])\n    for name, shares, price, change in reportdata:\n        rowdata = [ name, str(shares), f'{price:0.2f}', f'{change:0.2f}' ]\n        formatter.row(rowdata)\n")),Object(o.b)("p",null,"Since you added an argument to print_report(), you're going to need to modify the\n",Object(o.b)("inlineCode",{parentName:"p"},"portfolio_report()")," function as well.  Change it so that it creates a ",Object(o.b)("inlineCode",{parentName:"p"},"TableFormatter"),"\nlike this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"# report.py\n\nimport tableformat\n\n...\ndef portfolio_report(portfoliofile, pricefile):\n    '''\n    Make a stock report given portfolio and price data files.\n    '''\n    # Read data files\n    portfolio = read_portfolio(portfoliofile)\n    prices = read_prices(pricefile)\n\n    # Create the report data\n    report = make_report_data(portfolio, prices)\n\n    # Print it out\n    formatter = tableformat.TableFormatter()\n    print_report(report, formatter)\n")),Object(o.b)("p",null,"Run this new code:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},">>> ================================ RESTART ================================\n>>> import report\n>>> report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\n... crashes ...\n")),Object(o.b)("p",null,"It should immediately crash with a ",Object(o.b)("inlineCode",{parentName:"p"},"NotImplementedError")," exception.  That's not\ntoo exciting, but it's exactly what we expected.  Continue to the next part."),Object(o.b)("h3",{id:"exercise-46-using-inheritance-to-produce-different-output"},"Exercise 4.6: Using Inheritance to Produce Different Output"),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"TableFormatter")," class you defined in part (a) is meant to be\nextended via inheritance.  In fact, that's the whole idea.  To\nillustrate, define a class ",Object(o.b)("inlineCode",{parentName:"p"},"TextTableFormatter")," like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"# tableformat.py\n...\nclass TextTableFormatter(TableFormatter):\n    '''\n    Emit a table in plain-text format\n    '''\n    def headings(self, headers):\n        for h in headers:\n            print(f'{h:>10s}', end=' ')\n        print()\n        print(('-'*10 + ' ')*len(headers))\n\n    def row(self, rowdata):\n        for d in rowdata:\n            print(f'{d:>10s}', end=' ')\n        print()\n")),Object(o.b)("p",null,"Modify the ",Object(o.b)("inlineCode",{parentName:"p"},"portfolio_report()")," function like this and try it:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"# report.py\n...\ndef portfolio_report(portfoliofile, pricefile):\n    '''\n    Make a stock report given portfolio and price data files.\n    '''\n    # Read data files\n    portfolio = read_portfolio(portfoliofile)\n    prices = read_prices(pricefile)\n\n    # Create the report data\n    report = make_report_data(portfolio, prices)\n\n    # Print it out\n    formatter = tableformat.TextTableFormatter()\n    print_report(report, formatter)\n")),Object(o.b)("p",null,"This should produce the same output as before:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},">>> ================================ RESTART ================================\n>>> import report\n>>> report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n>>>\n")),Object(o.b)("p",null,"However, let's change the output to something else.  Define a new\nclass ",Object(o.b)("inlineCode",{parentName:"p"},"CSVTableFormatter")," that produces output in CSV format:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"# tableformat.py\n...\nclass CSVTableFormatter(TableFormatter):\n    '''\n    Output portfolio data in CSV format.\n    '''\n    def headings(self, headers):\n        print(','.join(headers))\n\n    def row(self, rowdata):\n        print(','.join(rowdata))\n")),Object(o.b)("p",null,"Modify your main program as follows:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"def portfolio_report(portfoliofile, pricefile):\n    '''\n    Make a stock report given portfolio and price data files.\n    '''\n    # Read data files\n    portfolio = read_portfolio(portfoliofile)\n    prices = read_prices(pricefile)\n\n    # Create the report data\n    report = make_report_data(portfolio, prices)\n\n    # Print it out\n    formatter = tableformat.CSVTableFormatter()\n    print_report(report, formatter)\n")),Object(o.b)("p",null,"You should now see CSV output like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},">>> ================================ RESTART ================================\n>>> import report\n>>> report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv')\nName,Shares,Price,Change\nAA,100,9.22,-22.98\nIBM,50,106.28,15.18\nCAT,150,35.46,-47.98\nMSFT,200,20.89,-30.34\nGE,95,13.48,-26.89\nMSFT,50,20.89,-44.21\nIBM,100,106.28,35.84\n")),Object(o.b)("p",null,"Using a similar idea, define a class ",Object(o.b)("inlineCode",{parentName:"p"},"HTMLTableFormatter"),"\nthat produces a table with the following output:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre"},"<tr><th>Name</th><th>Shares</th><th>Price</th><th>Change</th></tr>\n<tr><td>AA</td><td>100</td><td>9.22</td><td>-22.98</td></tr>\n<tr><td>IBM</td><td>50</td><td>106.28</td><td>15.18</td></tr>\n<tr><td>CAT</td><td>150</td><td>35.46</td><td>-47.98</td></tr>\n<tr><td>MSFT</td><td>200</td><td>20.89</td><td>-30.34</td></tr>\n<tr><td>GE</td><td>95</td><td>13.48</td><td>-26.89</td></tr>\n<tr><td>MSFT</td><td>50</td><td>20.89</td><td>-44.21</td></tr>\n<tr><td>IBM</td><td>100</td><td>106.28</td><td>35.84</td></tr>\n")),Object(o.b)("p",null,"Test your code by modifying the main program to create a\n",Object(o.b)("inlineCode",{parentName:"p"},"HTMLTableFormatter")," object instead of a\n",Object(o.b)("inlineCode",{parentName:"p"},"CSVTableFormatter")," object."),Object(o.b)("h3",{id:"exercise-47-polymorphism-in-action"},"Exercise 4.7: Polymorphism in Action"),Object(o.b)("p",null,"A major feature of object-oriented programming is that you can\nplug an object into a program and it will work without having to\nchange any of the existing code.  For example, if you wrote a program\nthat expected to use a ",Object(o.b)("inlineCode",{parentName:"p"},"TableFormatter")," object, it would work no\nmatter what kind of ",Object(o.b)("inlineCode",{parentName:"p"},"TableFormatter"),' you actually gave it.  This\nbehavior is sometimes referred to as "polymorphism."'),Object(o.b)("p",null,"One potential problem is figuring out how to allow a user to pick out\nthe formatter that they want.  Direct use of the class names such as\n",Object(o.b)("inlineCode",{parentName:"p"},"TextTableFormatter")," is often annoying.  Thus, you might consider some\nsimplified approach.  Perhaps you embed an ",Object(o.b)("inlineCode",{parentName:"p"},"if-"),"statement into the\ncode like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"def portfolio_report(portfoliofile, pricefile, fmt='txt'):\n    '''\n    Make a stock report given portfolio and price data files.\n    '''\n    # Read data files\n    portfolio = read_portfolio(portfoliofile)\n    prices = read_prices(pricefile)\n\n    # Create the report data\n    report = make_report_data(portfolio, prices)\n\n    # Print it out\n    if fmt == 'txt':\n        formatter = tableformat.TextTableFormatter()\n    elif fmt == 'csv':\n        formatter = tableformat.CSVTableFormatter()\n    elif fmt == 'html':\n        formatter = tableformat.HTMLTableFormatter()\n    else:\n        raise RuntimeError(f'Unknown format {fmt}')\n    print_report(report, formatter)\n")),Object(o.b)("p",null,"In this code, the user specifies a simplified name such as ",Object(o.b)("inlineCode",{parentName:"p"},"'txt'")," or\n",Object(o.b)("inlineCode",{parentName:"p"},"'csv'")," to pick a format.  However, is putting a big ",Object(o.b)("inlineCode",{parentName:"p"},"if"),"-statement in\nthe ",Object(o.b)("inlineCode",{parentName:"p"},"portfolio_report()")," function like that the best idea?  It might\nbe better to move that code to a general purpose function somewhere\nelse."),Object(o.b)("p",null,"In the ",Object(o.b)("inlineCode",{parentName:"p"},"tableformat.py")," file, add a function ",Object(o.b)("inlineCode",{parentName:"p"},"create_formatter(name)"),"\nthat allows a user to create a formatter given an output name such as\n",Object(o.b)("inlineCode",{parentName:"p"},"'txt'"),", ",Object(o.b)("inlineCode",{parentName:"p"},"'csv'"),", or ",Object(o.b)("inlineCode",{parentName:"p"},"'html'"),".  Modify ",Object(o.b)("inlineCode",{parentName:"p"},"portfolio_report()")," so that it\nlooks like this:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},"def portfolio_report(portfoliofile, pricefile, fmt='txt'):\n    '''\n    Make a stock report given portfolio and price data files.\n    '''\n    # Read data files\n    portfolio = read_portfolio(portfoliofile)\n    prices = read_prices(pricefile)\n\n    # Create the report data\n    report = make_report_data(portfolio, prices)\n\n    # Print it out\n    formatter = tableformat.create_formatter(fmt)\n    print_report(report, formatter)\n")),Object(o.b)("p",null,"Try calling the function with different formats to make sure it's working."),Object(o.b)("h3",{id:"exercise-48-putting-it-all-together"},"Exercise 4.8: Putting it all together"),Object(o.b)("p",null,"Modify the ",Object(o.b)("inlineCode",{parentName:"p"},"report.py")," program so that the ",Object(o.b)("inlineCode",{parentName:"p"},"portfolio_report()")," function takes\nan optional argument specifying the output format. For example:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-python"},">>> report.portfolio_report('Data/portfolio.csv', 'Data/prices.csv', 'txt')\n      Name     Shares      Price     Change\n---------- ---------- ---------- ----------\n        AA        100       9.22     -22.98\n       IBM         50     106.28      15.18\n       CAT        150      35.46     -47.98\n      MSFT        200      20.89     -30.34\n        GE         95      13.48     -26.89\n      MSFT         50      20.89     -44.21\n       IBM        100     106.28      35.84\n>>>\n")),Object(o.b)("p",null,"Modify the main program so that a format can be given on the command line:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-bash"},"bash $ python3 report.py Data/portfolio.csv Data/prices.csv csv\nName,Shares,Price,Change\nAA,100,9.22,-22.98\nIBM,50,106.28,15.18\nCAT,150,35.46,-47.98\nMSFT,200,20.89,-30.34\nGE,95,13.48,-26.89\nMSFT,50,20.89,-44.21\nIBM,100,106.28,35.84\nbash $\n")),Object(o.b)("h3",{id:"discussion"},"Discussion"),Object(o.b)("p",null,"Writing extensible code is one of the most common uses of inheritance\nin libraries and frameworks.  For example, a framework might instruct\nyou to define your own object that inherits from a provided base\nclass.  You're then told to fill in various methods that implement\nvarious bits of functionality."),Object(o.b)("p",null,'Another somewhat deeper concept is the idea of "owning your\nabstractions."  In the exercises, we defined ',Object(o.b)("em",{parentName:"p"},"our own class")," for\nformatting a table.  You may look at your code and tell yourself \"I should\njust use a formatting library or something that someone else already\nmade instead!\"  No, you should use BOTH your class and a library.\nUsing your own class promotes loose coupling and is more flexible.\nAs long as your application uses the programming interface of your class,\nyou can change the internal implementation to work in any way that you\nwant.  You can write all-custom code.  You can use someone's third\nparty package.  You swap out one third-party package for a different\npackage when you find a better one.  It doesn't matter--none of\nyour application code will break as long as you preserve keep the\ninterface.   That's a powerful idea and it's one of the reasons why\nyou might consider inheritance for something like this."),Object(o.b)("p",null,"That said, designing object oriented programs can be extremely\ndifficult.  For more information, you should probably look for books\non the topic of design patterns (although understanding what happened\nin this exercise will take you pretty far in terms of using objects in\na practically useful way)."))}p.isMDXComponent=!0}}]);
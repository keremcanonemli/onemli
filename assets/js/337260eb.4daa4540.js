(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{119:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return a})),n.d(t,"metadata",(function(){return s})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return p}));var r=n(3),o=n(8),i=(n(0),n(281)),a={id:"iterators",title:"Iterators",sidebar_label:"Iterators",slug:"iterators",custom_edit_url:null},s={unversionedId:"python/13_iterator_generator/iterators",id:"python/13_iterator_generator/iterators",isDocsHomePage:!1,title:"Iterators",description:"Iterator is an object that returns its elements one at a time.",source:"@site/docs/python/13_iterator_generator/2_iterators.md",slug:"/python/13_iterator_generator/iterators",permalink:"/docs/python/13_iterator_generator/iterators",editUrl:null,version:"current",sidebar_label:"Iterators",sidebar:"someSidebar",previous:{title:"Iterable",permalink:"/docs/python/13_iterator_generator/iterable"},next:{title:"Generator",permalink:"/docs/python/13_iterator_generator/generator"}},l=[{value:"File as iterator",id:"file-as-iterator",children:[]}],c={toc:l};function p(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"Iterator is an object that returns its elements one at a time."),Object(i.b)("p",null,"From Python point of view, it is any object that has ",Object(i.b)("inlineCode",{parentName:"p"},"__next__")," method. This method returns the next item if any, or returns ",Object(i.b)("inlineCode",{parentName:"p"},"StopIteration")," exception when items are finished. In addition, iterator remembers which object it stopped at in the last iteration."),Object(i.b)("p",null,"In Python, each iterator has ",Object(i.b)("inlineCode",{parentName:"p"},"__iter__")," method - that is, every iterator is an iterable. This method simply returns iterator itself."),Object(i.b)("p",null,"An example of creating an iterator from a list:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python"},"In [3]: numbers = [1, 2, 3]\n\nIn [4]: i = iter(numbers)\n")),Object(i.b)("p",null,"Now you can use ",Object(i.b)("inlineCode",{parentName:"p"},"next")," function that calls ",Object(i.b)("inlineCode",{parentName:"p"},"__next__")," method to take the next element:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python"},"In [5]: next(i)\nOut[5]: 1\n\nIn [6]: next(i)\nOut[6]: 2\n\nIn [7]: next(i)\nOut[7]: 3\n\nIn [8]: next(i)\n------------------------------------------------------------\nStopIteration              Traceback (most recent call last)\n<ipython-input-8-bed2471d02c1> in <module>()\n----\x3e 1 next(i)\n\nStopIteration:\n")),Object(i.b)("p",null,"After elements are finished, ",Object(i.b)("inlineCode",{parentName:"p"},"StopIteration")," exception is raised."),Object(i.b)("p",null,"Note"),Object(i.b)("p",null,"To make iterator to return elements again, it has to be re-created."),Object(i.b)("p",null,"Similar actions are performed when loop ",Object(i.b)("strong",{parentName:"p"},"for")," processes a list:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python"},"In [9]: for item in numbers:\n   ...:     print(item)\n   ...:\n1\n2\n3\n")),Object(i.b)("p",null,"When we iterate over the list items, the ",Object(i.b)("inlineCode",{parentName:"p"},"iter")," function is first applied to the list to create the iterator, and then its ",Object(i.b)("inlineCode",{parentName:"p"},"__next__")," method is called until a ",Object(i.b)("inlineCode",{parentName:"p"},"StopIteration")," exception is raised."),Object(i.b)("p",null,"Iterators are useful because they give elements one at a time. For example, when working with a file, it is useful that memory will not contain the whole file, but only one line of a file."),Object(i.b)("h2",{id:"file-as-iterator"},"File as iterator"),Object(i.b)("p",null,"One of the most common examples of an iterator is a file (r1.txt):"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"!\nservice timestamps debug datetime msec localtime show-timezone year\nservice timestamps log datetime msec localtime show-timezone year\nservice password-encryption\nservice sequence-numbers\n!\nno ip domain lookup\n!\nip ssh version 2\n!\n")),Object(i.b)("p",null,"If you open a file with the ",Object(i.b)("inlineCode",{parentName:"p"},"open")," function, an object is returned that represents the file:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python"},"In [10]: f = open('r1.txt')\n")),Object(i.b)("p",null,"This object is an iterator that can be verified by calling ",Object(i.b)("inlineCode",{parentName:"p"},"__next__")," method:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python"},"In [11]: f.__next__()\nOut[11]: '!\\n'\n\nIn [12]: f.__next__()\nOut[12]: 'service timestamps debug datetime msec localtime show-timezone year\\n'\n")),Object(i.b)("p",null,"You can also go through lines using ",Object(i.b)("strong",{parentName:"p"},"for")," loop:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python"},"In [13]: for line in f:\n    ...:     print(line.rstrip())\n    ...:\nservice timestamps log datetime msec localtime show-timezone year\nservice password-encryption\nservice sequence-numbers\n!\nno ip domain lookup\n!\nip ssh version 2\n!\n")),Object(i.b)("p",null,"When working with files, using a file as an iterator does not simply allow iterate file line by line - only one line is loaded into each iteration. This is very important when working with large files of thousands and hundreds of thousands of lines, such as log files."),Object(i.b)("p",null,"Therefore, when working with files in Python, the most commonly used expression is:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-python"},"In [14]: with open('r1.txt') as f:\n    ...:     for line in f:\n    ...:         print(line.rstrip())\n    ...:\n!\nservice timestamps debug datetime msec localtime show-timezone year\nservice timestamps log datetime msec localtime show-timezone year\nservice password-encryption\nservice sequence-numbers\n!\nno ip domain lookup\n!\nip ssh version 2\n!\n")))}p.isMDXComponent=!0},281:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var r=n(0),o=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=o.a.createContext({}),p=function(e){var t=o.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},b=function(e){var t=p(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},u=o.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,a=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),b=p(n),u=r,d=b["".concat(a,".").concat(u)]||b[u]||m[u]||i;return n?o.a.createElement(d,s(s({ref:t},c),{},{components:n})):o.a.createElement(d,s({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,a=new Array(i);a[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var c=2;c<i;c++)a[c]=n[c];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);